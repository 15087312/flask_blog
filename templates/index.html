<meta charset="UTF-8">
{# 继承基础模板base.html #}

{% extends "base.html" %}

{# 内容块开始 #}
{% block content %}
{# 页面标题 - 带背景框的艺术字效果 #}
<div class="title-container">
    <h1 class="artistic-title">淘货首页</h1>
</div>

{# 商品搜索表单 - 简化样式 #}

<form method="get" action="{{ url_for('search') }}" class="search-form">
    <input type="text" name="query" placeholder="搜索商品..." value="{{ request.args.get('query', '') }}" class="search-input">
    <button type="submit" class="search-btn">搜索</button>
</form>

{# 商品列表容器 #}
<div class="products-container">
{% for post in posts %}
    {# 单个商品卡片 #}
    <div class="product-card">
        {# 商品标题 - 链接到详情页 #}
        <h2><a href="{{ url_for('view_post', post_id=post.id) }}">{{ post.title }}</a></h2>
        {# 卖家信息 #}
        <p class="product-seller">卖家: {{ post.author.username }}</p>
        {# 商品描述 - 最多显示100个字符 #}
        <p class="product-description">{{ post.body[:100] }}{% if post.body|length > 100 %}...{% endif %}</p>
        {# 商品操作按钮 #}
        <div class="product-actions">
            <a href="{{ url_for('view_post', post_id=post.id) }}" class="view-product">查看商品详情</a>
        </div>
    </div>
    <hr>
{% else %}
    {# 无商品时的提示 #}
    <p class="no-products">暂无商品。</p>
{% endfor %}
</div>

<style>
    /* 商品列表容器样式 */
    .products-container {
        margin-top: 20px; /* 顶部外边距20像素 */
    }

    /* 商品卡片样式 */
    .product-card {
        padding: 15px;           /* 内边距15像素 */
        border: 1px solid #eee;  /* 浅灰色边框 */
        border-radius: 5px;      /* 圆角边框 */
        margin-bottom: 15px;     /* 底部外边距15像素 */
        transition: box-shadow 0.3s ease; /* 阴影动画效果 */
    }

    /* 商品卡片悬停效果 - 添加阴影 */
    .product-card:hover {
        box-shadow: 0 2px 8px rgba(0,0,0,0.1); /* 轻微阴影效果 */
    }

    /* 卖家信息样式 */
    .product-seller {
        color: #666;      /* 灰色文字 */
        font-size: 0.9em; /* 较小字体 */
        margin: 5px 0;    /* 上下外边距5像素 */
    }

    /* 商品描述样式 */
    .product-description {
        color: #333;       /* 深灰色文字 */
        line-height: 1.5;  /* 行高1.5倍 */
    }

    /* 商品操作按钮容器样式 */
    .product-actions {
        margin-top: 10px; /* 顶部外边距10像素 */
    }

    /* 查看商品按钮样式 */
    .view-product {
        color: #2a66e4;       /* 蓝色文字 */
        text-decoration: none; /* 去除下划线 */
        font-weight: bold;     /* 加粗字体 */
    }

    /* 查看商品按钮悬停效果 - 添加下划线 */
    .view-product:hover {
        text-decoration: underline; /* 添加下划线 */
    }

    /* 无商品提示样式 */
    .no-products {
        text-align: center; /* 文字居中 */
        color: #666;       /* 灰色文字 */
        font-style: italic; /* 斜体 */
        padding: 40px 0;    /* 上下内边距40像素 */
    }

    /* 标题容器 */
    .title-container {
        background: rgba(255,255,255,0.9);
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        margin: 20px 0;
        backdrop-filter: blur(5px);
    }

    /* 艺术字标题样式 */
    .artistic-title {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(to right, #4361ee, #4895ef);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        font-size: 2.5em;
        margin: 0;
    }

    /* 黑夜模式适配 */
    body.dark-mode .title-container {
        background: rgba(0,0,0,0.2);
    }


    /* 搜索表单样式 */


    .search-form {
    display: flex;
    justify-content: center;
    align-items: center;
    background: none;
    border: none;
    padding: 0;
    position: relative;
    width: fit-content;
    box-shadow: none;
}


    /* 搜索输入框样式 */
    .search-input {
        padding: 12px 20px;
        width: 400px;
        border: 2px solid #4361ee;
        border-radius: 25px;
        outline: none;
        font-size: 1em;
        transition: all 0.3s;
        background: white;

    }

    /* 搜索按钮样式 */
    .search-btn {
    display: inline-block; /* 显示按钮 */
    padding: 10px 15px;
    background-color: #4e73df;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-left: 10px;
}

    .search-btn:hover {
        background-color: #3f37c9;
    }

    /* 黑夜模式适配 */
    body.dark-mode .artistic-title {
        background: linear-gradient(to right, #a0a0a0, #c0c0c0);
        text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }


    /* 黑夜模式适配 */
    body.dark-mode .search-input {
        background-color: #333;
        color: #f0f0f0;
        border-color: #a0a0a0;
    }

    body.dark-mode .search-btn {
        background-color: #555;
    }

    body.dark-mode .search-btn:hover {
        background-color: #666;
    }

    body.dark-mode .search-input:focus {
        border-color: #c0c0c0;
        box-shadow: 0 0 8px rgba(160, 160, 160, 0.3);
    }
</style>
{% endblock %}
